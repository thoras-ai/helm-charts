---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: aiscaletargets.thoras.ai
spec:
  group: thoras.ai
  names:
    kind: AIScaleTarget
    listKind: AIScaleTargetList
    plural: aiscaletargets
    shortNames:
    - ast
    singular: aiscaletarget
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.model.mode
      name: Model
      type: string
    - jsonPath: .spec.horizontal.mode
      name: Horizontal
      type: string
    - jsonPath: .spec.vertical.mode
      name: Vertical
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: AIScaleTarget is a AIScaleTarget resource.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: AiScaleTargetSpec is the spec of a AiScaleTarget resource.
            properties:
              horizontal:
                properties:
                  additional_metrics:
                    description: Metrics to scale off of in addition to the metrics
                      defined in HPA
                    items:
                      description: |-
                        MetricSpec specifies how to scale based on a single metric
                        (only `type` and one other matching field should be set at once).
                      properties:
                        containerResource:
                          description: |-
                            containerResource refers to a resource metric (such as those specified in
                            requests and limits) known to Kubernetes describing a single container in
                            each pod of the current scale target (e.g. CPU or memory). Such metrics are
                            built in to Kubernetes, and have special scaling options on top of those
                            available to normal per-pod metrics using the "pods" source.
                          properties:
                            container:
                              description: container is the name of the container
                                in the pods of the scaling target
                              type: string
                            name:
                              description: name is the name of the resource in question.
                              type: string
                            target:
                              description: target specifies the target value for the
                                given metric
                              properties:
                                averageUtilization:
                                  description: |-
                                    averageUtilization is the target value of the average of the
                                    resource metric across all relevant pods, represented as a percentage of
                                    the requested value of the resource for the pods.
                                    Currently only valid for Resource metric source type
                                  format: int32
                                  type: integer
                                averageValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    averageValue is the target value of the average of the
                                    metric across all relevant pods (as a quantity)
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type:
                                  description: type represents whether the metric
                                    type is Utilization, Value, or AverageValue
                                  type: string
                                value:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: value is the target value of the metric
                                    (as a quantity).
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - type
                              type: object
                          required:
                          - container
                          - name
                          - target
                          type: object
                        external:
                          description: |-
                            external refers to a global metric that is not associated
                            with any Kubernetes object. It allows autoscaling based on information
                            coming from components running outside of cluster
                            (for example length of queue in cloud messaging service, or
                            QPS from loadbalancer running outside of cluster).
                          properties:
                            metric:
                              description: metric identifies the target metric by
                                name and selector
                              properties:
                                name:
                                  description: name is the name of the given metric
                                  type: string
                                selector:
                                  description: |-
                                    selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                    When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                    When unset, just the metricName will be used to gather metrics.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label
                                        selector requirements. The requirements are
                                        ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that
                                              the selector applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - name
                              type: object
                            target:
                              description: target specifies the target value for the
                                given metric
                              properties:
                                averageUtilization:
                                  description: |-
                                    averageUtilization is the target value of the average of the
                                    resource metric across all relevant pods, represented as a percentage of
                                    the requested value of the resource for the pods.
                                    Currently only valid for Resource metric source type
                                  format: int32
                                  type: integer
                                averageValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    averageValue is the target value of the average of the
                                    metric across all relevant pods (as a quantity)
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type:
                                  description: type represents whether the metric
                                    type is Utilization, Value, or AverageValue
                                  type: string
                                value:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: value is the target value of the metric
                                    (as a quantity).
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - type
                              type: object
                          required:
                          - metric
                          - target
                          type: object
                        object:
                          description: |-
                            object refers to a metric describing a single kubernetes object
                            (for example, hits-per-second on an Ingress object).
                          properties:
                            describedObject:
                              description: describedObject specifies the descriptions
                                of a object,such as kind,name apiVersion
                              properties:
                                apiVersion:
                                  description: apiVersion is the API version of the
                                    referent
                                  type: string
                                kind:
                                  description: 'kind is the kind of the referent;
                                    More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                                  type: string
                                name:
                                  description: 'name is the name of the referent;
                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                                  type: string
                              required:
                              - kind
                              - name
                              type: object
                            metric:
                              description: metric identifies the target metric by
                                name and selector
                              properties:
                                name:
                                  description: name is the name of the given metric
                                  type: string
                                selector:
                                  description: |-
                                    selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                    When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                    When unset, just the metricName will be used to gather metrics.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label
                                        selector requirements. The requirements are
                                        ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that
                                              the selector applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - name
                              type: object
                            target:
                              description: target specifies the target value for the
                                given metric
                              properties:
                                averageUtilization:
                                  description: |-
                                    averageUtilization is the target value of the average of the
                                    resource metric across all relevant pods, represented as a percentage of
                                    the requested value of the resource for the pods.
                                    Currently only valid for Resource metric source type
                                  format: int32
                                  type: integer
                                averageValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    averageValue is the target value of the average of the
                                    metric across all relevant pods (as a quantity)
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type:
                                  description: type represents whether the metric
                                    type is Utilization, Value, or AverageValue
                                  type: string
                                value:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: value is the target value of the metric
                                    (as a quantity).
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - type
                              type: object
                          required:
                          - describedObject
                          - metric
                          - target
                          type: object
                        pods:
                          description: |-
                            pods refers to a metric describing each pod in the current scale target
                            (for example, transactions-processed-per-second).  The values will be
                            averaged together before being compared to the target value.
                          properties:
                            metric:
                              description: metric identifies the target metric by
                                name and selector
                              properties:
                                name:
                                  description: name is the name of the given metric
                                  type: string
                                selector:
                                  description: |-
                                    selector is the string-encoded form of a standard kubernetes label selector for the given metric
                                    When set, it is passed as an additional parameter to the metrics server for more specific metrics scoping.
                                    When unset, just the metricName will be used to gather metrics.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label
                                        selector requirements. The requirements are
                                        ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that
                                              the selector applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                            x-kubernetes-list-type: atomic
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                      x-kubernetes-list-type: atomic
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                              required:
                              - name
                              type: object
                            target:
                              description: target specifies the target value for the
                                given metric
                              properties:
                                averageUtilization:
                                  description: |-
                                    averageUtilization is the target value of the average of the
                                    resource metric across all relevant pods, represented as a percentage of
                                    the requested value of the resource for the pods.
                                    Currently only valid for Resource metric source type
                                  format: int32
                                  type: integer
                                averageValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    averageValue is the target value of the average of the
                                    metric across all relevant pods (as a quantity)
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type:
                                  description: type represents whether the metric
                                    type is Utilization, Value, or AverageValue
                                  type: string
                                value:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: value is the target value of the metric
                                    (as a quantity).
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - type
                              type: object
                          required:
                          - metric
                          - target
                          type: object
                        resource:
                          description: |-
                            resource refers to a resource metric (such as those specified in
                            requests and limits) known to Kubernetes describing each pod in the
                            current scale target (e.g. CPU or memory). Such metrics are built in to
                            Kubernetes, and have special scaling options on top of those available
                            to normal per-pod metrics using the "pods" source.
                          properties:
                            name:
                              description: name is the name of the resource in question.
                              type: string
                            target:
                              description: target specifies the target value for the
                                given metric
                              properties:
                                averageUtilization:
                                  description: |-
                                    averageUtilization is the target value of the average of the
                                    resource metric across all relevant pods, represented as a percentage of
                                    the requested value of the resource for the pods.
                                    Currently only valid for Resource metric source type
                                  format: int32
                                  type: integer
                                averageValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    averageValue is the target value of the average of the
                                    metric across all relevant pods (as a quantity)
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                type:
                                  description: type represents whether the metric
                                    type is Utilization, Value, or AverageValue
                                  type: string
                                value:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: value is the target value of the metric
                                    (as a quantity).
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - type
                              type: object
                          required:
                          - name
                          - target
                          type: object
                        type:
                          description: |-
                            type is the type of metric source.  It should be one of "ContainerResource", "External",
                            "Object", "Pods" or "Resource", each mapping to a matching field in the object.
                          type: string
                      required:
                      - type
                      type: object
                    type: array
                  exclude_metrics:
                    description: Metrics from HPA for thoras to ignore
                    items:
                      properties:
                        name:
                          type: string
                        type:
                          type: string
                      required:
                      - name
                      - type
                      type: object
                    type: array
                  mode:
                    enum:
                    - autonomous
                    - auto
                    - recommendation
                    - recommend
                    - rec
                    type: string
                  scaling_behavior:
                    description: Rules for how large a proposed scale event must be
                      before triggering
                    properties:
                      scale_down:
                        properties:
                          absolute:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Absolute specifies fixed resource amounts as thresholds. Used when Type is "absolute".
                              For vertical scaling: Use "memory" and "cpu" resource names.
                                Example: {"memory": "50Mi", "cpu": "100m"} means the resource change must exceed
                                these absolute values to trigger scaling, regardless of current usage percentage.
                              For horizontal scaling: Use "pods" resource name to specify replica count thresholds.
                                Example: {"pods": "5"} means the replica count change must be at least 5 to trigger scaling.
                            type: object
                          percent:
                            description: |-
                              Percent specifies a percentage threshold (0-100). Used when Type is "percent".
                              For example, 20 means the resource change must exceed 20% of current usage to trigger scaling.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            enum:
                            - percent
                            - absolute
                            type: string
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: percent must be set when type is percent
                          rule: 'self.type == ''percent'' ? has(self.percent) : true'
                        - message: absolute must be set when type is absolute
                          rule: 'self.type == ''absolute'' ? has(self.absolute) :
                            true'
                      scale_up:
                        properties:
                          absolute:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Absolute specifies fixed resource amounts as thresholds. Used when Type is "absolute".
                              For vertical scaling: Use "memory" and "cpu" resource names.
                                Example: {"memory": "50Mi", "cpu": "100m"} means the resource change must exceed
                                these absolute values to trigger scaling, regardless of current usage percentage.
                              For horizontal scaling: Use "pods" resource name to specify replica count thresholds.
                                Example: {"pods": "5"} means the replica count change must be at least 5 to trigger scaling.
                            type: object
                          percent:
                            description: |-
                              Percent specifies a percentage threshold (0-100). Used when Type is "percent".
                              For example, 20 means the resource change must exceed 20% of current usage to trigger scaling.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            enum:
                            - percent
                            - absolute
                            type: string
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: percent must be set when type is percent
                          rule: 'self.type == ''percent'' ? has(self.percent) : true'
                        - message: absolute must be set when type is absolute
                          rule: 'self.type == ''absolute'' ? has(self.absolute) :
                            true'
                    type: object
                required:
                - mode
                type: object
              model:
                properties:
                  forecast_blocks:
                    default: 15m0s
                    description: Time duration for how far into the future Thoras
                      should forecast into.
                    type: string
                    x-kubernetes-int-or-string: true
                  forecast_buffer_percentage:
                    default: 0%
                    description: Percentage, represented as a int between 1 and 100,
                      that Thoras will apply on top of predictions for safety.
                    type: string
                    x-kubernetes-int-or-string: true
                  forecast_cron:
                    default: '*/15 * * * *'
                    type: string
                  mode:
                    description: While Thoras models always bias for reliability,
                      you have the option to set a "mode" for the model to inform
                      the level of aggression in scaling.
                    enum:
                    - balanced
                    - cost-optimized
                    - undershoot
                    type: string
                type: object
              scaleTargetRef:
                properties:
                  apiVersion:
                    type: string
                  kind:
                    type: string
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
              selector:
                description: |-
                  A label selector is a label query over a set of resources. The result of matchLabels and
                  matchExpressions are ANDed. An empty label selector matches all objects. A null
                  label selector matches no objects.
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: |-
                        A label selector requirement is a selector that contains values, a key, and an operator that
                        relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: |-
                            operator represents a key's relationship to a set of values.
                            Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: |-
                            values is an array of string values. If the operator is In or NotIn,
                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                            the values array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                          x-kubernetes-list-type: atomic
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                    x-kubernetes-list-type: atomic
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: |-
                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
              vertical:
                properties:
                  containers:
                    items:
                      properties:
                        cpu:
                          properties:
                            limit:
                              properties:
                                ratio:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - ratio
                              type: object
                            lowerbound:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            upperbound:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                          required:
                          - lowerbound
                          type: object
                        jvm_options:
                          description: |-
                            JVMOptions configures automatic JVM heap sizing.
                            The calculation flow is:
                             1. Xmx = max(heap_forecast, heap_current) * (1 + XmxBuffer)
                             2. Apply XmxBounds clamping to Xmx
                             3. Xms = Xmx * XmsRatio
                             4. Container Memory = (Xmx + nonheap) * (1 + MemoryBuffer)
                          properties:
                            enable_auto_heap_size:
                              description: Enable automatic JVM heap size adjustment
                                based on memory requests.
                              type: boolean
                            memory_buffer:
                              default: 10%
                              description: |-
                                MemoryBuffer specifies the buffer percentage to add above total JVM memory (heap + non-heap) when setting container memory limits.
                                This accounts for non-heap memory regions such as metaspace, thread stacks, and native memory allocations.
                                Valid range: 0%-100%. Defaults to 10%.
                              type: string
                            xms_ratio:
                              default: 80%
                              description: |-
                                XmsRatio specifies the ratio of the initial heap size (Xms) relative to the maximum heap size (Xmx).
                                This determines how much memory is allocated to the JVM heap at startup.
                                Valid range: 0%-100%. Defaults to 80%.
                              type: string
                            xmx_bounds:
                              properties:
                                limit:
                                  properties:
                                    ratio:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  required:
                                  - ratio
                                  type: object
                                lowerbound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                upperbound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - lowerbound
                              type: object
                            xmx_buffer:
                              default: 10%
                              description: |-
                                XmxBuffer specifies the buffer percentage to add above observed heap memory usage when setting Xmx.
                                This provides headroom for heap allocation to prevent out-of-memory errors.
                                Valid range: 0%-100%. Defaults to 10%.
                              type: string
                          type: object
                        memory:
                          properties:
                            limit:
                              properties:
                                ratio:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - ratio
                              type: object
                            lowerbound:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            upperbound:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                          required:
                          - lowerbound
                          type: object
                        name:
                          description: name of container to scale
                          type: string
                      required:
                      - name
                      type: object
                      x-kubernetes-validations:
                      - message: EnableAutoHeapSize can only be true if memory.limit
                          is set
                        rule: '!has(self.jvm_options) || !self.jvm_options.enable_auto_heap_size
                          || (has(self.memory) && has(self.memory.limit))'
                    type: array
                  in_place_resizing:
                    description: |-
                      Deprecated: Use UpdatePolicy instead.
                      When InPlaceResizing is not specified and UpdatePolicy is not specified, the default behavior is UpdatePolicy{UpdateMode: "recreate", RecreateResources: ["memory"]}.
                    properties:
                      allow_restart_on_memory_limit_decrease:
                        type: boolean
                      enabled:
                        type: boolean
                    type: object
                  mode:
                    enum:
                    - autonomous
                    - auto
                    - recommendation
                    - recommend
                    - rec
                    type: string
                  scaling_behavior:
                    description: Rules for how large a proposed scale event must be
                      before triggering
                    properties:
                      scale_down:
                        properties:
                          absolute:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Absolute specifies fixed resource amounts as thresholds. Used when Type is "absolute".
                              For vertical scaling: Use "memory" and "cpu" resource names.
                                Example: {"memory": "50Mi", "cpu": "100m"} means the resource change must exceed
                                these absolute values to trigger scaling, regardless of current usage percentage.
                              For horizontal scaling: Use "pods" resource name to specify replica count thresholds.
                                Example: {"pods": "5"} means the replica count change must be at least 5 to trigger scaling.
                            type: object
                          percent:
                            description: |-
                              Percent specifies a percentage threshold (0-100). Used when Type is "percent".
                              For example, 20 means the resource change must exceed 20% of current usage to trigger scaling.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            enum:
                            - percent
                            - absolute
                            type: string
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: percent must be set when type is percent
                          rule: 'self.type == ''percent'' ? has(self.percent) : true'
                        - message: absolute must be set when type is absolute
                          rule: 'self.type == ''absolute'' ? has(self.absolute) :
                            true'
                      scale_up:
                        properties:
                          absolute:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Absolute specifies fixed resource amounts as thresholds. Used when Type is "absolute".
                              For vertical scaling: Use "memory" and "cpu" resource names.
                                Example: {"memory": "50Mi", "cpu": "100m"} means the resource change must exceed
                                these absolute values to trigger scaling, regardless of current usage percentage.
                              For horizontal scaling: Use "pods" resource name to specify replica count thresholds.
                                Example: {"pods": "5"} means the replica count change must be at least 5 to trigger scaling.
                            type: object
                          percent:
                            description: |-
                              Percent specifies a percentage threshold (0-100). Used when Type is "percent".
                              For example, 20 means the resource change must exceed 20% of current usage to trigger scaling.
                            format: int32
                            minimum: 0
                            type: integer
                          type:
                            enum:
                            - percent
                            - absolute
                            type: string
                        required:
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: percent must be set when type is percent
                          rule: 'self.type == ''percent'' ? has(self.percent) : true'
                        - message: absolute must be set when type is absolute
                          rule: 'self.type == ''absolute'' ? has(self.absolute) :
                            true'
                    type: object
                  update_policy:
                    description: 'UpdatePolicy defines how pod updates are handled.
                      If not specified, defaults to UpdatePolicy{UpdateMode: "recreate",
                      RecreateResources: ["memory"]}.'
                    properties:
                      recreate_resources:
                        default:
                        - memory
                        description: |-
                          RecreateResources lists which resource types should trigger pod recreation when changed.
                          Defaults to ["memory"] if not set.
                        items:
                          type: string
                        type: array
                      update_mode:
                        default: recreate
                        description: UpdateMode specifies the update strategy. Defaults
                          to "recreate" if not set.
                        enum:
                        - initial
                        - recreate
                        - in_place_or_recreate
                        - in_place
                        type: string
                    type: object
                required:
                - containers
                - mode
                type: object
                x-kubernetes-validations:
                - message: when in_place_resizing.enabled is true, update_policy.update_mode
                    must be either 'in_place' or 'in_place_or_recreate'
                  rule: '!has(self.in_place_resizing) || !has(self.in_place_resizing.enabled)
                    || !self.in_place_resizing.enabled || !has(self.update_policy)
                    || self.update_policy.update_mode == ''in_place'' || self.update_policy.update_mode
                    == ''in_place_or_recreate'''
                - message: when in_place_resizing.enabled is false, update_policy.update_mode
                    cannot be 'in_place' or 'in_place_or_recreate'
                  rule: '!has(self.in_place_resizing) || self.in_place_resizing.enabled
                    || !has(self.update_policy) || (self.update_policy.update_mode
                    != ''in_place'' && self.update_policy.update_mode != ''in_place_or_recreate'')'
            required:
            - model
            type: object
            x-kubernetes-validations:
            - message: exactly one of scaleTargetRef or selector must be set
              rule: (has(self.scaleTargetRef) && !has(self.selector)) || (!has(self.scaleTargetRef)
                && has(self.selector))
            - message: cannot have both horizontal and vertical scaling in autonomous
                mode
              rule: '!(has(self.horizontal) && has(self.vertical) && self.horizontal.mode.startsWith(''auto'')
                && self.vertical.mode.startsWith(''auto''))'
          status:
            properties:
              labelSelector:
                type: string
              latestSuggestion:
                description: LatestSuggestion contains the most recent scaling recommendations
                  from Thoras AI
                properties:
                  currentReplicas:
                    description: |-
                      CurrentReplicas is the number of replicas at the time this suggestion was generated.
                      Used as a baseline for scaling calculations.
                    format: int32
                    type: integer
                  end:
                    format: date-time
                    type: string
                  forecastedTotals:
                    description: ForecastedTotals contains predicted resource usage
                      metrics.
                    items:
                      description: ForecastMetric represents a predicted resource
                        usage value for a specific metric.
                      properties:
                        metric:
                          description: Metric name - can be "cpu", "memory", "heap",
                            "non-heap", etc.
                          type: string
                        targetName:
                          description: TargetName is the name of the deployment or
                            container this metric applies to
                          type: string
                        targetType:
                          description: |-
                            TargetType indicates whether this is a deployment-level or container-level metric
                            Values: "deployment" or "container"
                          type: string
                        value:
                          anyOf:
                          - type: integer
                          - type: string
                          description: Value is the forecasted value in Kubernetes
                            resource format (e.g., "11m" for CPU, "24Mi" for memory)
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                      required:
                      - metric
                      - targetName
                      - targetType
                      - value
                      type: object
                    type: array
                  hasEnoughDataToScale:
                    description: |-
                      HasEnoughDataToScale indicates whether sufficient data was available to generate reliable recommendations.
                      When false, scaling actions may be skipped to prevent decisions based on incomplete data.
                    type: boolean
                  resourceRecommendations:
                    description: ResourceRecommendations contains optimal resource
                      requests for each container.
                    items:
                      description: ContainerRecommendation contains optimal resource
                        allocation recommendations for a single container.
                      properties:
                        container:
                          description: Container name
                          type: string
                        recommendations:
                          description: Resource recommendations for this container
                          items:
                            description: ResourceRecommendation represents an optimal
                              resource allocation for a specific resource type.
                            properties:
                              resource:
                                description: Resource type - "cpu" or "memory"
                                type: string
                              value:
                                anyOf:
                                - type: integer
                                - type: string
                                description: Value in Kubernetes resource format (e.g.,
                                  "12m" for CPU, "256Mi" for memory)
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                            required:
                            - resource
                            - value
                            type: object
                          type: array
                      required:
                      - container
                      - recommendations
                      type: object
                    type: array
                  start:
                    description: Time window for this suggestion
                    format: date-time
                    type: string
                  suggestedReplicas:
                    description: SuggestedReplicas is the recommended number of pod
                      replicas for horizontal scaling.
                    format: int32
                    type: integer
                required:
                - currentReplicas
                - end
                - hasEnoughDataToScale
                - start
                - suggestedReplicas
                type: object
              previousVerticalMode:
                type: string
              replicas:
                anyOf:
                - type: integer
                - type: string
                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                x-kubernetes-int-or-string: true
              thorasSuggestedReplicas:
                anyOf:
                - type: integer
                - type: string
                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                x-kubernetes-int-or-string: true
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
